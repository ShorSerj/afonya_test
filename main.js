(()=>{"use strict";const e=function(e){var t=document.createElement("li"),a=document.createElement("input");a.classList.add("param__checkbox"),a.setAttribute("type","checkbox"),a.setAttribute("id","checkbox");var n=document.createElement("div");n.classList.add("param__checkbox-mark");var r=document.createElement("label");return r.classList.add("param__checkbox-label"),r.setAttribute("for","checkbox"),r.innerHTML=e,t.append(a),t.append(n),t.append(r),t},t=function(t,a){var n=document.createElement("li");n.classList.add("param");var r=document.createElement("div");r.classList.add("param__title");var l=document.createElement("div");l.classList.add("param__title-text"),l.innerHTML=t;var i=document.createElement("div");i.classList.add("param__icon"),i.innerHTML="&times;";var c=document.createElement("div");c.classList.add("param__options-wrapper");var s=document.createElement("ul");s.classList.add("param__options"),a.forEach((function(t){s.append(e(t))}));var o=document.createElement("div");o.classList.add("param__accept");var u=document.createElement("p");return u.innerHTML="Применить",r.append(l),r.append(i),c.append(s),c.append(o),o.append(u),n.append(r),n.append(c),r.addEventListener("click",(function(e){r.classList.toggle("param__title_active"),c.classList.toggle("param__options-wrapper_visible"),i.classList.toggle("param__icon_visible")})),n};var a=function(e){return new Promise((function(t,a){var n=new XMLHttpRequest;n.open("GET","https://afternoon-mesa-71443.herokuapp.com/".concat(e)),n.responseType="json",n.setRequestHeader("Content-Type","application/json"),n.send(),n.onload=function(){200!=n.status?alert("Ошибка ".concat(n.status,": ").concat(n.statusText)):t(n.response)},n.onerror=function(){alert("Запрос не удался")}})).then()};const n=function(e,t){var a=document.createElement("li");a.classList.add("param");var n=document.createElement("div");n.classList.add("param__title");var r=document.createElement("div");r.classList.add("param__title-text"),r.innerHTML=e;var l=document.createElement("div");l.classList.add("param__slider-wrapper");var i=document.createElement("div");i.classList.add("param__slider-track");var c=document.createElement("input");c.setAttribute("type","range"),c.setAttribute("min",t.min_value),c.setAttribute("max",t.max_value),c.setAttribute("value",t.min_value),c.oninput=function(){d()};var s=document.createElement("input");s.setAttribute("type","range"),s.setAttribute("min",t.min_value),s.setAttribute("max",t.max_value),s.setAttribute("value",t.max_value),s.oninput=function(){v()};var o=document.createElement("div");o.classList.add("param__slider-values");var u=document.createElement("input");u.classList.add("param__slider-value"),u.oninput=function(){d(u.value)},u.setAttribute("placeholder",t.min_value);var p=document.createElement("input");p.classList.add("param__slider-value"),p.oninput=function(){v(p.value)},p.setAttribute("placeholder",t.max_value),o.append(u),o.append(p),n.append(r),a.append(n),l.append(i),l.append(c),l.append(s),a.append(l),a.append(o);var m=c.max;function d(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(e<t.min_value?u.value=t.min_value:c.value=e),parseInt(s.value)-parseInt(c.value)<=0&&(c.value=parseInt(s.value)-0),m=c.max,!a&&isNaN(e)?u.value=c.value:""==e&&(u.value=null),_()}function v(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(e<u.value||e>parseInt(t.max_value)?(p.value=t.max_value,s.value=t.max_value):(p.value=e,s.value=e)),parseInt(s.value)-parseInt(c.value)<=0&&(s.value=parseInt(c.value)+0),!a&&isNaN(e)?p.value=s.value:""==e&&(p.value=null,s.value=t.max_value),m=c.max,_()}function _(){var e=c.value/m*100,t=s.value/m*100;i.style.background="linear-gradient(to right, #B2B2B2 ".concat(e,"% , #0F74D1 ").concat(e,"% , #0F74D1 ").concat(t,"%, #B2B2B2 ").concat(t,"%)")}return d(null,!0),v(null,!0),a};var r=document.querySelector(".filter__title"),l=document.querySelector(".filter__arrow"),i=document.querySelector(".filter-wrapper"),c=document.querySelector(".filter__more");c.innerHTML="Показать больше параметров (12)";var s=document.querySelector(".filter__max-filter");new Promise((function(e){e(a("data-min"))})).then((function(e){var a=document.querySelector(".filter__min-filter");e.params.forEach((function(e){var n=t(e.title,e.options);a.append(n)}))})),r.addEventListener("click",(function(){l.classList.toggle("filter__arrow_up"),i.classList.toggle("filter-wrapper")})),document.addEventListener("click",(function(e){var t=document.querySelectorAll(".param__options-wrapper_visible");null==t||t.forEach((function(t){t.closest(".param")!==e.target.closest(".param")?(t.classList.remove("param__options-wrapper_visible"),t.closest(".param").querySelector(".param__icon_visible").classList.remove("param__icon_visible"),t.closest(".param").querySelector(".param__title").classList.remove("param__title_active")):t.closest(".param").querySelector(".param__title").classList.add("param__title_active")}))})),c.addEventListener("click",(function(){s.classList.toggle("filter__max-filter_visible"),c.classList.toggle("filter__more-max"),"filter__more filter__more-max"==c.className?c.innerHTML="Показать меньше параметров (12)":c.innerHTML="Показать больше параметров (12)",s.children.length<1&&new Promise((function(e){e(a("data-max"))})).then((function(e){var a=document.querySelector(".filter__max-filter");e.params.forEach((function(e){var r;if(null!==(r=e.options)&&void 0!==r&&r.min_value){var l=n(e.title,e.options);a.append(l)}else{var i=t(e.title,e.options);a.append(i)}}))}))}))})();
//# sourceMappingURL=main.js.map